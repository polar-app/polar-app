// allow reads on resources that aren't present.  This is critical because if
// we do not have this rule then when a user tries to read a document that
// does not exist then they will get a "permission failed" error/exception.
// We also need to do this FIRST so that no other rule is evaluated since
// they might result in null pointer exceptions when trying to read the data
// property on a record that does not exist.
allow delete, read: if resource == null || resource.data == null;

// only allow the user to read their own account
allow read, write: if (resource == null || (request.auth.uid == resource.data.uid && request.data.nspace === resource.data.uid));

